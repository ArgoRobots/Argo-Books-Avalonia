<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:ArgoBooks.Controls"
             xmlns:loc="using:ArgoBooks.Localization"
             xmlns:icons="using:ArgoBooks"
             mc:Ignorable="d" d:DesignWidth="200" d:DesignHeight="200"
             x:Class="ArgoBooks.Controls.ReportsContextMenu"
             x:DataType="controls:ReportsContextMenu">

    <UserControl.Styles>
        <!-- Context menu item styles (defined in AnimatedContextMenu, duplicated here for designer support) -->
        <Style Selector="Button.context-menu-item">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="10,8" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.context-menu-item:pointerover">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>
        <Style Selector="Button.context-menu-item:pressed">
            <Setter Property="Background" Value="{DynamicResource SurfaceActiveBrush}" />
        </Style>
        <Style Selector="Button.context-menu-item.danger:pointerover">
            <Setter Property="Background" Value="{DynamicResource ErrorLightBrush}" />
        </Style>
        <Style Selector="Button.context-menu-item.danger:pressed">
            <Setter Property="Background" Value="{DynamicResource ErrorLightBrush}" />
        </Style>
    </UserControl.Styles>

    <controls:AnimatedContextMenu IsOpen="{Binding IsOpen, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}"
                                   MenuX="{Binding MenuX, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}"
                                   MenuY="{Binding MenuY, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}"
                                   CloseCommand="{Binding CloseCommand, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}">
        <controls:AnimatedContextMenu.MenuContent>
            <StackPanel Spacing="2" MinWidth="140">
                <!-- Bring to Front -->
                <Button Classes="context-menu-item"
                        Command="{Binding BringToFrontCommand, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{x:Static icons:Icons.SelectionAll}"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource TextSecondaryBrush}" />
                        <TextBlock Text="{loc:Loc 'Bring to Front'}" VerticalAlignment="Center" />
                    </StackPanel>
                </Button>

                <!-- Send to Back -->
                <Button Classes="context-menu-item"
                        Command="{Binding SendToBackCommand, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{x:Static icons:Icons.SelectionDash}"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource TextSecondaryBrush}" />
                        <TextBlock Text="{loc:Loc 'Send to Back'}" VerticalAlignment="Center" />
                    </StackPanel>
                </Button>

                <!-- Separator -->
                <Border Height="1"
                        Background="{DynamicResource BorderBrush}"
                        Margin="4,4" />

                <!-- Duplicate -->
                <Button Classes="context-menu-item"
                        Command="{Binding DuplicateCommand, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{x:Static icons:Icons.Copy}"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource TextSecondaryBrush}" />
                        <TextBlock Text="{loc:Loc Duplicate}" VerticalAlignment="Center" />
                    </StackPanel>
                </Button>

                <!-- Delete -->
                <Button Classes="context-menu-item danger"
                        Command="{Binding DeleteCommand, RelativeSource={RelativeSource AncestorType=controls:ReportsContextMenu}}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{x:Static icons:Icons.Delete}"
                                  Width="16" Height="16"
                                  Foreground="{DynamicResource DangerBrush}" />
                        <TextBlock Text="{loc:Loc Delete}" VerticalAlignment="Center" />
                    </StackPanel>
                </Button>
            </StackPanel>
        </controls:AnimatedContextMenu.MenuContent>
    </controls:AnimatedContextMenu>
</UserControl>
