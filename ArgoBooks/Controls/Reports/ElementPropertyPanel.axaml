<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="280" d:DesignHeight="600"
             x:Class="ArgoBooks.Controls.Reports.ElementPropertyPanel"
             x:Name="PropertyPanel"
             Background="#FAFAFA">

    <UserControl.Styles>
        <!-- Section header style -->
        <Style Selector="TextBlock.section-header">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#424242"/>
            <Setter Property="Margin" Value="0,12,0,8"/>
        </Style>

        <!-- Property label style -->
        <Style Selector="TextBlock.property-label">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#616161"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Input field style -->
        <Style Selector="TextBox.property-input">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>

        <!-- NumericUpDown style -->
        <Style Selector="NumericUpDown.property-input">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="8,6"/>
        </Style>

        <!-- ComboBox style -->
        <Style Selector="ComboBox.property-input">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>

        <!-- Checkbox style -->
        <Style Selector="CheckBox.property-checkbox">
            <Setter Property="FontSize" Value="12"/>
        </Style>

        <!-- Separator style -->
        <Style Selector="Border.property-separator">
            <Setter Property="Height" Value="1"/>
            <Setter Property="Background" Value="#E0E0E0"/>
            <Setter Property="Margin" Value="0,12,0,0"/>
        </Style>

        <!-- Color button style -->
        <Style Selector="Button.color-button">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#BDBDBD"/>
        </Style>
    </UserControl.Styles>

    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="12">

            <!-- No Selection Message -->
            <TextBlock x:Name="NoSelectionMessage"
                       Text="No element selected"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Foreground="#9E9E9E"
                       FontStyle="Italic"
                       Margin="0,40,0,0"
                       IsVisible="{Binding !HasSelection, ElementName=PropertyPanel}"/>

            <!-- Multi-Selection Message -->
            <StackPanel x:Name="MultiSelectionPanel"
                        IsVisible="{Binding HasMultiSelection, ElementName=PropertyPanel}">
                <TextBlock Text="Multiple Elements Selected"
                           Classes="section-header"
                           HorizontalAlignment="Center"/>
                <TextBlock x:Name="SelectionCountText"
                           HorizontalAlignment="Center"
                           Foreground="#757575"
                           FontSize="12"
                           Margin="0,4,0,0"/>
            </StackPanel>

            <!-- Single Element Properties -->
            <StackPanel x:Name="SingleElementPanel"
                        IsVisible="{Binding HasSingleSelection, ElementName=PropertyPanel}">

                <!-- Element Type Header -->
                <Border Background="#E3F2FD"
                        CornerRadius="4"
                        Padding="12,8"
                        Margin="0,0,0,12">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon x:Name="ElementTypeIcon" Width="20" Height="20" Foreground="#1976D2"/>
                        <TextBlock x:Name="ElementTypeText"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Foreground="#1976D2"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- Common Properties Section -->
                <TextBlock Text="Position &amp; Size" Classes="section-header"/>

                <Grid ColumnDefinitions="*,8,*" RowDefinitions="Auto,8,Auto">
                    <!-- X Position -->
                    <StackPanel Grid.Row="0" Grid.Column="0">
                        <TextBlock Text="X" Classes="property-label"/>
                        <NumericUpDown x:Name="PositionX"
                                       Classes="property-input"
                                       Minimum="0"
                                       FormatString="F0"
                                       ValueChanged="OnPositionXChanged"/>
                    </StackPanel>

                    <!-- Y Position -->
                    <StackPanel Grid.Row="0" Grid.Column="2">
                        <TextBlock Text="Y" Classes="property-label"/>
                        <NumericUpDown x:Name="PositionY"
                                       Classes="property-input"
                                       Minimum="0"
                                       FormatString="F0"
                                       ValueChanged="OnPositionYChanged"/>
                    </StackPanel>

                    <!-- Width -->
                    <StackPanel Grid.Row="2" Grid.Column="0">
                        <TextBlock Text="Width" Classes="property-label"/>
                        <NumericUpDown x:Name="ElementWidth"
                                       Classes="property-input"
                                       Minimum="20"
                                       FormatString="F0"
                                       ValueChanged="OnWidthChanged"/>
                    </StackPanel>

                    <!-- Height -->
                    <StackPanel Grid.Row="2" Grid.Column="2">
                        <TextBlock Text="Height" Classes="property-label"/>
                        <NumericUpDown x:Name="ElementHeight"
                                       Classes="property-input"
                                       Minimum="20"
                                       FormatString="F0"
                                       ValueChanged="OnHeightChanged"/>
                    </StackPanel>
                </Grid>

                <Border Classes="property-separator"/>

                <!-- Lock/Visibility Properties -->
                <TextBlock Text="Display" Classes="section-header"/>

                <StackPanel Spacing="8">
                    <CheckBox x:Name="IsLockedCheckbox"
                              Content="Lock element"
                              Classes="property-checkbox"
                              IsCheckedChanged="OnIsLockedChanged"/>
                    <CheckBox x:Name="IsVisibleCheckbox"
                              Content="Visible"
                              Classes="property-checkbox"
                              IsCheckedChanged="OnIsVisibleChanged"/>
                </StackPanel>

                <Border Classes="property-separator"/>

                <!-- Z-Order Section -->
                <TextBlock Text="Layer Order" Classes="section-header"/>

                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button x:Name="BringToFrontButton"
                            ToolTip.Tip="Bring to Front"
                            Click="OnBringToFrontClick"
                            Padding="8,6">
                        <PathIcon Width="16" Height="16"
                                  Data="M2,2H11V11H2V2M9,4H4V9H9V4M22,13V22H13V13H22M20,15H15V20H20V15M16,8V11H13V8H16M8,16H11V13H8V16Z"/>
                    </Button>
                    <Button x:Name="SendToBackButton"
                            ToolTip.Tip="Send to Back"
                            Click="OnSendToBackClick"
                            Padding="8,6">
                        <PathIcon Width="16" Height="16"
                                  Data="M2,2H16V16H2V2M14,14V4H4V14H14M22,8V22H8V20H20V8H22Z"/>
                    </Button>
                    <Button x:Name="BringForwardButton"
                            ToolTip.Tip="Bring Forward"
                            Click="OnBringForwardClick"
                            Padding="8,6">
                        <PathIcon Width="16" Height="16"
                                  Data="M6,6H18V18H6V6M8,8V16H16V8H8Z"/>
                    </Button>
                    <Button x:Name="SendBackwardButton"
                            ToolTip.Tip="Send Backward"
                            Click="OnSendBackwardClick"
                            Padding="8,6">
                        <PathIcon Width="16" Height="16"
                                  Data="M4,4H16V16H4V4M6,6V14H14V6H6M20,8V20H8V18H18V8H20Z"/>
                    </Button>
                </StackPanel>

                <Border Classes="property-separator"/>

                <!-- Element-Specific Properties Container -->
                <ContentControl x:Name="ElementSpecificProperties"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
