<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ArgoBooks.ViewModels"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
             x:Class="ArgoBooks.Modals.ConfirmationDialog"
             x:DataType="vm:ConfirmationDialogViewModel"
             IsVisible="{Binding IsOpen}">

    <Design.DataContext>
        <vm:ConfirmationDialogViewModel />
    </Design.DataContext>

    <!-- Modal Overlay -->
    <Grid IsVisible="{Binding IsOpen}">
        <!-- Backdrop -->
        <Border Background="#80000000"
                IsHitTestVisible="True"
                PointerPressed="Backdrop_PointerPressed">
            <Border.Transitions>
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                </Transitions>
            </Border.Transitions>
        </Border>

        <!-- Modal Content -->
        <Border x:Name="DialogBorder"
                Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Width="400"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                BoxShadow="0 8 32 0 #40000000"
                Focusable="True"
                KeyDown="Dialog_KeyDown"
                Opacity="0"
                RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <ScaleTransform ScaleX="0.95" ScaleY="0.95" />
            </Border.RenderTransform>
            <Border.Transitions>
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.15" Easing="CubicEaseOut" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15" Easing="CubicEaseOut" />
                </Transitions>
            </Border.Transitions>

            <Grid RowDefinitions="Auto,*,Auto">
                <!-- Header -->
                <Border Grid.Row="0"
                        Padding="24,20"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="0,0,0,1">
                    <TextBlock Text="{Binding Title}"
                               FontSize="18"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}" />
                </Border>

                <!-- Body -->
                <Border Grid.Row="1" Padding="24,20">
                    <TextBlock Text="{Binding Message}"
                               FontSize="14"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               TextWrapping="Wrap" />
                </Border>

                <!-- Footer -->
                <Border Grid.Row="2"
                        Padding="24,16"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="0,1,0,0">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Spacing="12">
                        <!-- Cancel Button -->
                        <Button Classes="secondary-button"
                                Content="{Binding CancelButtonText}"
                                Command="{Binding CancelActionCommand}"
                                IsVisible="{Binding ShowCancelButton}" />

                        <!-- Secondary Button -->
                        <Button Classes.secondary-button="{Binding !IsSecondaryDestructive}"
                                Classes.danger-button="{Binding IsSecondaryDestructive}"
                                Content="{Binding SecondaryButtonText}"
                                Command="{Binding SecondaryActionCommand}"
                                IsVisible="{Binding ShowSecondaryButton}" />

                        <!-- Primary Button -->
                        <Button Classes.primary-button="{Binding !IsPrimaryDestructive}"
                                Classes.danger-button="{Binding IsPrimaryDestructive}"
                                Content="{Binding PrimaryButtonText}"
                                Command="{Binding PrimaryActionCommand}"
                                IsVisible="{Binding ShowPrimaryButton}" />
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>

    <UserControl.Styles>
    </UserControl.Styles>
</UserControl>
