<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:ArgoBooks.Controls"
             xmlns:loc="using:ArgoBooks.Localization"
             xmlns:icons="using:ArgoBooks"
             mc:Ignorable="d" d:DesignWidth="200" d:DesignHeight="300"
             x:Class="ArgoBooks.Controls.ColumnVisibilityMenu"
             x:DataType="controls:ColumnVisibilityMenu">

    <controls:AnimatedContextMenu IsOpen="{Binding IsOpen, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}"
                                   MenuX="{Binding MenuX, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}"
                                   MenuY="{Binding MenuY, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}"
                                   CloseCommand="{Binding CloseCommand, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}">
        <controls:AnimatedContextMenu.MenuContent>
            <StackPanel Spacing="4" Width="180">
                <Grid ColumnDefinitions="*,Auto" Margin="8,4,4,8">
                    <TextBlock Grid.Column="0"
                               Text="{loc:Loc 'Show Columns'}"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               VerticalAlignment="Center" />
                    <Button Grid.Column="1"
                            Classes="reset-columns-button"
                            Command="{Binding ResetCommand, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}"
                            ToolTip.Tip="{loc:Loc 'Reset to Default'}">
                        <PathIcon Data="{x:Static icons:Icons.Refresh}"
                                  Width="14" Height="14" />
                    </Button>
                </Grid>
                <ContentPresenter Content="{Binding ColumnsContent, RelativeSource={RelativeSource AncestorType=controls:ColumnVisibilityMenu}}" />
            </StackPanel>
        </controls:AnimatedContextMenu.MenuContent>
    </controls:AnimatedContextMenu>

    <UserControl.Styles>
        <!-- Column Toggle Checkbox -->
        <Style Selector="CheckBox.column-toggle">
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style Selector="CheckBox.column-toggle:pointerover">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>

        <!-- Reset Columns Button -->
        <Style Selector="Button.reset-columns-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="4" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Foreground" Value="{DynamicResource TextTertiaryBrush}" />
        </Style>
        <Style Selector="Button.reset-columns-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Button.reset-columns-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>
        <Style Selector="Button.reset-columns-button:pointerover PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        </Style>
    </UserControl.Styles>
</UserControl>
