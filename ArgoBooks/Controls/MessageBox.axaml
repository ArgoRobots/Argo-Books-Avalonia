<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="using:ArgoBooks.Controls"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="200"
             x:Class="ArgoBooks.Controls.MessageBox"
             x:DataType="controls:MessageBox">

    <Border Background="{DynamicResource SurfaceBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="{StaticResource RadiusLg}"
            MinWidth="320"
            MaxWidth="480"
            Padding="24">
        <Grid RowDefinitions="Auto,*,Auto">
            <!-- Header with Icon and Title -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="16" Margin="0,0,0,16">
                <!-- Icon -->
                <Border x:Name="IconBorder"
                        Width="48" Height="48"
                        CornerRadius="{StaticResource RadiusMd}"
                        VerticalAlignment="Top"
                        IsVisible="{Binding ShowIcon, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}">
                    <Border.Styles>
                        <Style Selector="Border.info">
                            <Setter Property="Background" Value="{DynamicResource PrimaryIconBgBrush}" />
                        </Style>
                        <Style Selector="Border.success">
                            <Setter Property="Background" Value="{DynamicResource SuccessIconBgBrush}" />
                        </Style>
                        <Style Selector="Border.warning">
                            <Setter Property="Background" Value="{DynamicResource WarningIconBgBrush}" />
                        </Style>
                        <Style Selector="Border.error">
                            <Setter Property="Background" Value="{DynamicResource DangerIconBgBrush}" />
                        </Style>
                        <Style Selector="Border.question">
                            <Setter Property="Background" Value="{DynamicResource PrimaryIconBgBrush}" />
                        </Style>
                    </Border.Styles>
                    <PathIcon x:Name="IconPath" Width="24" Height="24">
                        <PathIcon.Styles>
                            <Style Selector="PathIcon.info">
                                <Setter Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z" />
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}" />
                            </Style>
                            <Style Selector="PathIcon.success">
                                <Setter Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                <Setter Property="Foreground" Value="{DynamicResource SuccessBrush}" />
                            </Style>
                            <Style Selector="PathIcon.warning">
                                <Setter Property="Data" Value="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
                                <Setter Property="Foreground" Value="{DynamicResource WarningBrush}" />
                            </Style>
                            <Style Selector="PathIcon.error">
                                <Setter Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                                <Setter Property="Foreground" Value="{DynamicResource DangerBrush}" />
                            </Style>
                            <Style Selector="PathIcon.question">
                                <Setter Property="Data" Value="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}" />
                            </Style>
                        </PathIcon.Styles>
                    </PathIcon>
                </Border>

                <!-- Title -->
                <TextBlock Text="{Binding Title, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                           FontSize="{StaticResource FontSizeXl}"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           VerticalAlignment="Center"
                           IsVisible="{Binding Title, RelativeSource={RelativeSource AncestorType=controls:MessageBox}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
            </StackPanel>

            <!-- Message Content -->
            <ScrollViewer Grid.Row="1"
                          HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto"
                          MaxHeight="300"
                          Margin="0,0,0,24">
                <TextBlock Text="{Binding Message, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                           FontSize="{StaticResource FontSizeMd}"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           TextWrapping="Wrap"
                           LineHeight="24" />
            </ScrollViewer>

            <!-- Buttons -->
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="12">
                <!-- Tertiary/Cancel Button -->
                <Button Classes="secondary"
                        Content="{Binding TertiaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                        Command="{Binding TertiaryCommand, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                        IsVisible="{Binding TertiaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                        MinWidth="80" />

                <!-- Secondary/No Button -->
                <Button Classes="secondary"
                        Content="{Binding SecondaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                        Command="{Binding SecondaryCommand, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                        IsVisible="{Binding SecondaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                        MinWidth="80" />

                <!-- Primary/OK/Yes Button -->
                <controls:ArgoButton x:Name="PrimaryButton"
                                     Text="{Binding PrimaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                                     Command="{Binding PrimaryCommand, RelativeSource={RelativeSource AncestorType=controls:MessageBox}}"
                                     IsVisible="{Binding PrimaryButtonText, RelativeSource={RelativeSource AncestorType=controls:MessageBox}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                     MinWidth="80">
                    <controls:ArgoButton.Styles>
                        <Style Selector="controls|ArgoButton.info">
                            <Setter Property="Variant" Value="Primary" />
                        </Style>
                        <Style Selector="controls|ArgoButton.success">
                            <Setter Property="Variant" Value="Success" />
                        </Style>
                        <Style Selector="controls|ArgoButton.warning">
                            <Setter Property="Variant" Value="Warning" />
                        </Style>
                        <Style Selector="controls|ArgoButton.error">
                            <Setter Property="Variant" Value="Danger" />
                        </Style>
                        <Style Selector="controls|ArgoButton.question">
                            <Setter Property="Variant" Value="Primary" />
                        </Style>
                    </controls:ArgoButton.Styles>
                </controls:ArgoButton>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
