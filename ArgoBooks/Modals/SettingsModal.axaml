<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ArgoBooks.ViewModels"
             xmlns:local="using:ArgoBooks.Converters"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="550"
             x:Class="ArgoBooks.Modals.SettingsModal"
             x:DataType="vm:SettingsModalViewModel">

    <Design.DataContext>
        <vm:SettingsModalViewModel />
    </Design.DataContext>

    <Panel IsVisible="{Binding IsOpen}">
        <!-- Modal Backdrop -->
        <Border Background="#80000000"
                PointerPressed="Backdrop_PointerPressed">
            <Border.Transitions>
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                </Transitions>
            </Border.Transitions>
        </Border>

        <!-- Modal Container -->
        <Border x:Name="ModalBorder"
                Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="12"
                Width="650"
                Height="600"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                BoxShadow="0 8 32 0 #40000000"
                Focusable="True"
                KeyDown="Modal_KeyDown"
                Opacity="0"
                RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <ScaleTransform ScaleX="0.95" ScaleY="0.95" />
            </Border.RenderTransform>
            <Border.Transitions>
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.15" Easing="CubicEaseOut" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15" Easing="CubicEaseOut" />
                </Transitions>
            </Border.Transitions>

            <Grid RowDefinitions="Auto,*,Auto">
                <!-- Header -->
                <Border Grid.Row="0"
                        Padding="24,20"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="0,0,0,1">
                    <Grid ColumnDefinitions="*,Auto">
                        <TextBlock Grid.Column="0"
                                   Text="Settings"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}" />
                        <Button Grid.Column="1"
                                Classes="icon-button"
                                Command="{Binding CloseCommand}">
                            <PathIcon Data="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                                      Width="20" Height="20" />
                        </Button>
                    </Grid>
                </Border>

                <!-- Body with Tabs -->
                <TabControl Grid.Row="1"
                            SelectedIndex="{Binding SelectedTabIndex}"
                            Margin="0">
                    <!-- General Tab -->
                    <TabItem Header="General">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="24,20,16,20" Padding="0,0,8,0">
                            <StackPanel Spacing="20">
                                <!-- Language -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Language"
                                               FontSize="13"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                    <ComboBox ItemsSource="{Binding Languages}"
                                              SelectedItem="{Binding SelectedLanguage}"
                                              Classes="form-combobox" />
                                </StackPanel>

                                <!-- Currency -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Currency"
                                               FontSize="13"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                    <ComboBox ItemsSource="{Binding Currencies}"
                                              SelectedItem="{Binding SelectedCurrency}"
                                              Classes="form-combobox" />
                                </StackPanel>

                                <!-- Date Format -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Date Format"
                                               FontSize="13"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                    <ComboBox ItemsSource="{Binding DateFormats}"
                                              SelectedItem="{Binding SelectedDateFormat}"
                                              Classes="form-combobox" />
                                </StackPanel>

                                <!-- Time Zone -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Time Zone"
                                               FontSize="13"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                    <ComboBox ItemsSource="{Binding TimeZones}"
                                              SelectedItem="{Binding SelectedTimeZone}"
                                              Classes="form-combobox" />
                                </StackPanel>

                                <!-- Privacy -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16"
                                        Margin="0,8,0,0">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="4">
                                            <TextBlock Text="Anonymous Data Collection"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Help improve Argo Books by sharing anonymous usage data"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}"
                                                       TextWrapping="Wrap" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding AnonymousDataCollection}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Notifications Tab -->
                    <TabItem Header="Notifications">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="24,20,16,20" Padding="0,0,8,0">
                            <StackPanel Spacing="4">
                                <TextBlock Text="Configure notification preferences"
                                           FontSize="13"
                                           Foreground="{DynamicResource TextTertiaryBrush}"
                                           Margin="0,0,0,16" />

                                <!-- Low Stock Alert -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto" MinHeight="40">
                                        <StackPanel Grid.Column="0" Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Low Stock Alert"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Get notified when inventory is running low"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding LowStockAlert}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Invoice Overdue -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto" MinHeight="40">
                                        <StackPanel Grid.Column="0" Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Invoice Overdue"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Alert when invoices become overdue"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding InvoiceOverdue}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Payment Received -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto" MinHeight="40">
                                        <StackPanel Grid.Column="0" Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Payment Received"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Notify when payments are received"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding PaymentReceived}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Large Transaction Alert -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto" MinHeight="40">
                                        <StackPanel Grid.Column="0" Spacing="2" VerticalAlignment="Center">
                                            <TextBlock Text="Large Transaction Alert"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Alert for transactions above threshold"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding LargeTransactionAlert}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Appearance Tab -->
                    <TabItem Header="Appearance">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="24,20,16,20" Padding="0,0,8,0">
                            <StackPanel Spacing="24" HorizontalAlignment="Center">
                                <!-- Theme -->
                                <StackPanel Spacing="12">
                                    <TextBlock Text="Theme"
                                               FontSize="14"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextPrimaryBrush}" />
                                    <StackPanel Orientation="Horizontal" Spacing="16">
                                        <!-- Light Theme -->
                                        <Button Classes="theme-selector"
                                                Command="{Binding SelectThemeCommand}"
                                                CommandParameter="Light">
                                            <Grid RowDefinitions="Auto,Auto">
                                                <Border Grid.Row="0"
                                                        Width="100" Height="60"
                                                        Background="#FFFFFF"
                                                        CornerRadius="6"
                                                        ClipToBounds="True">
                                                    <Border.BorderThickness>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:StringEqualsConverter CompareValue="Light" TrueValue="2" FalseValue="1" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderThickness>
                                                    <Border.BorderBrush>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:ThemeBorderBrushConverter CompareValue="Light" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderBrush>
                                                    <StackPanel Margin="10" Spacing="6">
                                                        <Border Height="10" Background="#E5E7EB" CornerRadius="2" />
                                                        <Border Height="8" Width="50" Background="#E5E7EB" CornerRadius="2" HorizontalAlignment="Left" />
                                                    </StackPanel>
                                                </Border>
                                                <TextBlock Grid.Row="1"
                                                           Text="Light"
                                                           FontSize="12"
                                                           HorizontalAlignment="Center"
                                                           Margin="0,8,0,0"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />
                                            </Grid>
                                        </Button>

                                        <!-- Dark Theme -->
                                        <Button Classes="theme-selector"
                                                Command="{Binding SelectThemeCommand}"
                                                CommandParameter="Dark">
                                            <Grid RowDefinitions="Auto,Auto">
                                                <Border Grid.Row="0"
                                                        Width="100" Height="60"
                                                        Background="#1F2937"
                                                        CornerRadius="6"
                                                        ClipToBounds="True">
                                                    <Border.BorderThickness>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:StringEqualsConverter CompareValue="Dark" TrueValue="2" FalseValue="1" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderThickness>
                                                    <Border.BorderBrush>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:ThemeBorderBrushConverter CompareValue="Dark" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderBrush>
                                                    <StackPanel Margin="10" Spacing="6">
                                                        <Border Height="10" Background="#374151" CornerRadius="2" />
                                                        <Border Height="8" Width="50" Background="#374151" CornerRadius="2" HorizontalAlignment="Left" />
                                                    </StackPanel>
                                                </Border>
                                                <TextBlock Grid.Row="1"
                                                           Text="Dark"
                                                           FontSize="12"
                                                           HorizontalAlignment="Center"
                                                           Margin="0,8,0,0"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />
                                            </Grid>
                                        </Button>

                                        <!-- System Theme -->
                                        <Button Classes="theme-selector"
                                                Command="{Binding SelectThemeCommand}"
                                                CommandParameter="System">
                                            <Grid RowDefinitions="Auto,Auto">
                                                <Border Grid.Row="0"
                                                        Width="100" Height="60"
                                                        CornerRadius="6"
                                                        ClipToBounds="True">
                                                    <Border.BorderThickness>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:StringEqualsConverter CompareValue="System" TrueValue="2" FalseValue="1" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderThickness>
                                                    <Border.BorderBrush>
                                                        <Binding Path="SelectedTheme">
                                                            <Binding.Converter>
                                                                <local:ThemeBorderBrushConverter CompareValue="System" />
                                                            </Binding.Converter>
                                                        </Binding>
                                                    </Border.BorderBrush>
                                                    <Grid>
                                                        <Border Background="#FFFFFF" CornerRadius="6,0,0,6" HorizontalAlignment="Left" Width="50" />
                                                        <Border Background="#1F2937" CornerRadius="0,6,6,0" HorizontalAlignment="Right" Width="50" />
                                                    </Grid>
                                                </Border>
                                                <TextBlock Grid.Row="1"
                                                           Text="System"
                                                           FontSize="12"
                                                           HorizontalAlignment="Center"
                                                           Margin="0,8,0,0"
                                                           Foreground="{DynamicResource TextSecondaryBrush}" />
                                            </Grid>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Accent Color -->
                                <StackPanel Spacing="12">
                                    <TextBlock Text="Accent Color"
                                               FontSize="14"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextPrimaryBrush}" />
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <!-- Blue -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Blue">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#3B82F6">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Blue" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                        <!-- Green -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Green">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#10B981">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Green" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                        <!-- Purple -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Purple">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#8B5CF6">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Purple" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                        <!-- Pink -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Pink">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#EC4899">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Pink" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                        <!-- Orange -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Orange">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#F97316">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Orange" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                        <!-- Teal -->
                                        <Button Classes="color-button"
                                                Command="{Binding SelectAccentColorCommand}"
                                                CommandParameter="Teal">
                                            <Grid>
                                                <Border Width="48" Height="48" CornerRadius="24" Background="#14B8A6">
                                                    <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"
                                                              Width="20" Height="20" Foreground="White">
                                                        <PathIcon.IsVisible>
                                                            <Binding Path="SelectedAccentColor">
                                                                <Binding.Converter>
                                                                    <local:StringEqualsConverter CompareValue="Teal" />
                                                                </Binding.Converter>
                                                            </Binding>
                                                        </PathIcon.IsVisible>
                                                    </PathIcon>
                                                </Border>
                                            </Grid>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Security Tab -->
                    <TabItem Header="Security">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="24,20,16,20" Padding="0,0,8,0">
                            <StackPanel Spacing="16">
                                <!-- Password - No password set -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16"
                                        IsVisible="{Binding !HasPassword}">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="2">
                                            <TextBlock Text="Password"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Add a password to protect your company file"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <Button Grid.Column="1"
                                                Classes="primary-button"
                                                Content="Add Password"
                                                Command="{Binding OpenAddPasswordCommand}"
                                                VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Password - Has password set -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16"
                                        IsVisible="{Binding HasPassword}">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="2">
                                            <TextBlock Text="Password"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Your company file is password protected"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                            <Button Classes="secondary-button"
                                                    Content="Change"
                                                    Command="{Binding OpenChangePasswordCommand}"
                                                    VerticalAlignment="Center" />
                                            <Button Classes="danger-button"
                                                    Content="Remove"
                                                    Command="{Binding OpenRemovePasswordCommand}"
                                                    VerticalAlignment="Center" />
                                        </StackPanel>
                                    </Grid>
                                </Border>

                                <!-- Windows Hello -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="2">
                                            <TextBlock Text="Windows Hello"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Use fingerprint or face recognition to unlock"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding WindowsHelloEnabled}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- File Encryption -->
                                <Border Background="{DynamicResource SurfaceAltBrush}"
                                        CornerRadius="8"
                                        Padding="16">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <StackPanel Grid.Column="0" Spacing="2">
                                            <TextBlock Text="File Encryption"
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryBrush}" />
                                            <TextBlock Text="Encrypt company files with AES-256"
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextTertiaryBrush}" />
                                        </StackPanel>
                                        <ToggleSwitch Grid.Column="1"
                                                      IsChecked="{Binding FileEncryptionEnabled}"
                                                      VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Auto-Lock -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="Auto-Lock"
                                               FontSize="13"
                                               FontWeight="Medium"
                                               Foreground="{DynamicResource TextSecondaryBrush}" />
                                    <ComboBox ItemsSource="{Binding AutoLockOptions}"
                                              SelectedItem="{Binding SelectedAutoLock}"
                                              Classes="form-combobox" />
                                    <TextBlock Text="Automatically lock the application after inactivity"
                                               FontSize="12"
                                               Foreground="{DynamicResource TextTertiaryBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>

                <!-- Footer -->
                <Border Grid.Row="2"
                        Padding="24,16"
                        BorderBrush="{DynamicResource BorderBrush}"
                        BorderThickness="0,1,0,0">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Spacing="12">
                        <Button Classes="secondary-button"
                                Content="Cancel"
                                Command="{Binding CloseCommand}" />
                        <Button Classes="primary-button"
                                Content="Save Changes"
                                Command="{Binding SaveCommand}" />
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Add Password Modal -->
        <Panel IsVisible="{Binding IsAddPasswordModalOpen}">
            <Border Background="#80000000" PointerPressed="PasswordBackdrop_PointerPressed" />
            <Border Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Width="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BoxShadow="0 8 32 0 #40000000">
                <StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1">
                        <TextBlock Text="Add Password" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}" />
                    </Border>
                    <StackPanel Margin="20" Spacing="16">
                        <TextBlock Text="Create a password to protect your company file. You'll need this password to open the file."
                                   FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}" TextWrapping="Wrap" />
                        <StackPanel Spacing="6">
                            <TextBlock Text="New Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             Text="{Binding NewPassword}"
                                             RevealPassword="{Binding IsNewPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleNewPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding NewPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <StackPanel Spacing="6">
                            <TextBlock Text="Confirm Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             Text="{Binding ConfirmPassword}"
                                             RevealPassword="{Binding IsConfirmPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleConfirmPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding ConfirmPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <TextBlock Text="{Binding PasswordError}" FontSize="12" Foreground="#dc2626"
                                   IsVisible="{Binding PasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                    </StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                            <Button Classes="secondary-button" Content="Cancel" Command="{Binding ClosePasswordModalCommand}" />
                            <Button Classes="primary-button" Content="Add Password" Command="{Binding ConfirmAddPasswordCommand}" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Panel>

        <!-- Change Password Modal -->
        <Panel IsVisible="{Binding IsChangePasswordModalOpen}">
            <Border Background="#80000000" PointerPressed="PasswordBackdrop_PointerPressed" />
            <Border Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Width="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BoxShadow="0 8 32 0 #40000000">
                <StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1">
                        <TextBlock Text="Change Password" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}" />
                    </Border>
                    <StackPanel Margin="20" Spacing="16">
                        <StackPanel Spacing="6">
                            <TextBlock Text="Current Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             x:Name="ChangeCurrentPasswordTextBox"
                                             Text="{Binding CurrentPassword}"
                                             RevealPassword="{Binding IsCurrentPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleCurrentPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding CurrentPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <StackPanel Spacing="6">
                            <TextBlock Text="New Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             Text="{Binding NewPassword}"
                                             RevealPassword="{Binding IsNewPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleNewPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding NewPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <StackPanel Spacing="6">
                            <TextBlock Text="Confirm New Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             Text="{Binding ConfirmPassword}"
                                             RevealPassword="{Binding IsConfirmPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleConfirmPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding ConfirmPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <TextBlock Text="{Binding PasswordError}" FontSize="12" Foreground="#dc2626"
                                   IsVisible="{Binding PasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                    </StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                            <Button Classes="secondary-button" Content="Cancel" Command="{Binding ClosePasswordModalCommand}" />
                            <Button Classes="primary-button" Content="Change Password" Command="{Binding ConfirmChangePasswordCommand}" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Panel>

        <!-- Remove Password Modal -->
        <Panel IsVisible="{Binding IsRemovePasswordModalOpen}">
            <Border Background="#80000000" PointerPressed="PasswordBackdrop_PointerPressed" />
            <Border Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Width="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BoxShadow="0 8 32 0 #40000000">
                <StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1">
                        <TextBlock Text="Remove Password" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}" />
                    </Border>
                    <StackPanel Margin="20" Spacing="16">
                        <TextBlock Text="Are you sure you want to remove password protection? Your company file will no longer be protected."
                                   FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}" TextWrapping="Wrap" />
                        <StackPanel Spacing="6">
                            <TextBlock Text="Current Password" FontSize="13" FontWeight="Medium" Foreground="{DynamicResource TextSecondaryBrush}" />
                            <Border Background="{DynamicResource SurfaceBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6">
                                <Grid ColumnDefinitions="*,Auto">
                                    <TextBox Grid.Column="0"
                                             x:Name="RemoveCurrentPasswordTextBox"
                                             Text="{Binding CurrentPassword}"
                                             RevealPassword="{Binding IsCurrentPasswordVisible}"
                                             Classes="password-field" />
                                    <Button Grid.Column="1"
                                            Classes="eye-toggle"
                                            Command="{Binding ToggleCurrentPasswordVisibilityCommand}">
                                        <PathIcon Data="{Binding CurrentPasswordVisibilityIcon}" Width="16" Height="16" />
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <TextBlock Text="{Binding PasswordError}" FontSize="12" Foreground="#dc2626"
                                   IsVisible="{Binding PasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                    </StackPanel>
                    <Border Padding="20,16" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,1,0,0">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                            <Button Classes="secondary-button" Content="Cancel" Command="{Binding ClosePasswordModalCommand}" />
                            <Button Classes="danger-button" Content="Remove Password" Command="{Binding ConfirmRemovePasswordCommand}" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </Panel>
    </Panel>

    <UserControl.Styles>
        <!-- Icon Button -->
        <Style Selector="Button.icon-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="28" />
            <Setter Property="Height" Value="28" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.icon-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Button.icon-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>
        <Style Selector="Button.icon-button PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}" />
        </Style>

        <!-- Form ComboBox -->
        <Style Selector="ComboBox.form-combobox">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>

        <!-- Primary Button -->
        <Style Selector="Button.primary-button">
            <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="16,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.primary-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
        </Style>
        <Style Selector="Button.primary-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource PrimaryHoverBrush}" />
        </Style>

        <!-- Secondary Button -->
        <Style Selector="Button.secondary-button">
            <Setter Property="Background" Value="{DynamicResource SurfaceAltBrush}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="16,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.secondary-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceAltBrush}" />
        </Style>
        <Style Selector="Button.secondary-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>

        <!-- Danger Button -->
        <Style Selector="Button.danger-button">
            <Setter Property="Background" Value="#dc2626" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="16,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="Medium" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.danger-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="#dc2626" />
        </Style>
        <Style Selector="Button.danger-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="#b91c1c" />
        </Style>

        <!-- Form Input -->
        <Style Selector="TextBox.form-input">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        </Style>
        <Style Selector="TextBox.form-input /template/ Border#PART_BorderElement">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}" />
        </Style>
        <Style Selector="TextBox.form-input:focus /template/ Border#PART_BorderElement">
            <Setter Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
        </Style>

        <!-- Password Field (borderless, for use inside bordered container) -->
        <Style Selector="TextBox.password-field">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
            <Setter Property="PasswordChar" Value="*" />
        </Style>
        <Style Selector="TextBox.password-field /template/ Border#PART_BorderElement">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
        </Style>

        <!-- Eye Toggle Button (for password visibility) -->
        <Style Selector="Button.eye-toggle">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Width" Value="40" />
            <Setter Property="Height" Value="40" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="CornerRadius" Value="0,6,6,0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Margin" Value="0" />
        </Style>
        <Style Selector="Button.eye-toggle /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Button.eye-toggle:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>
        <Style Selector="Button.eye-toggle PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}" />
        </Style>

        <!-- Color Button -->
        <Style Selector="Button.color-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.color-button /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Button.color-button:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>

        <!-- Theme Selector Button -->
        <Style Selector="Button.theme-selector">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.theme-selector /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Button.theme-selector:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
        </Style>

        <!-- TabControl - remove default underline -->
        <Style Selector="TabControl">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="TabControl /template/ ItemsPresenter#PART_ItemsPresenter">
            <Setter Property="Margin" Value="24,0" />
        </Style>
        <Style Selector="TabControl /template/ Border#PART_InnerBorder">
            <Setter Property="BorderThickness" Value="0" />
        </Style>

        <!-- Tab Item Styling -->
        <Style Selector="TabItem">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Padding" Value="8,12,8,10" />
            <Setter Property="Margin" Value="4,0" />
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="TabItem /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Padding" Value="8,4" />
        </Style>
        <Style Selector="TabItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="Background" Value="{DynamicResource SurfaceHoverBrush}" />
        </Style>
        <Style Selector="TabItem:pointerover">
            <Setter Property="Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        </Style>
        <Style Selector="TabItem:pointerover /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="TextBlock.Foreground" Value="{DynamicResource TextPrimaryBrush}" />
        </Style>
        <Style Selector="TabItem:selected">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}" />
        </Style>
        <Style Selector="TabItem:selected /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="TextBlock.Foreground" Value="{DynamicResource PrimaryBrush}" />
        </Style>
        <Style Selector="TabItem:selected:pointerover">
            <Setter Property="Foreground" Value="{DynamicResource PrimaryBrush}" />
        </Style>
        <Style Selector="TabItem:selected /template/ Border#PART_SelectedPipe">
            <Setter Property="IsVisible" Value="True" />
            <Setter Property="Background" Value="{DynamicResource PrimaryBrush}" />
            <Setter Property="Height" Value="2" />
            <Setter Property="VerticalAlignment" Value="Bottom" />
            <Setter Property="Margin" Value="0,0,0,0" />
            <Setter Property="CornerRadius" Value="1" />
        </Style>

        <!-- Animated Checkbox -->
        <Style Selector="CheckBox">
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="CheckBox /template/ Border#NormalRectangle">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15" />
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.15" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="CheckBox /template/ Path#CheckGlyph">
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.15" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15" Easing="CubicEaseOut" />
                </Transitions>
            </Setter>
            <Setter Property="Opacity" Value="0" />
            <Setter Property="RenderTransform" Value="scale(0.5)" />
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
        </Style>
        <Style Selector="CheckBox:checked /template/ Path#CheckGlyph">
            <Setter Property="Opacity" Value="1" />
            <Setter Property="RenderTransform" Value="scale(1)" />
        </Style>
    </UserControl.Styles>
</UserControl>
